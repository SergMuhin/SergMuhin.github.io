(function(t){function e(e){for(var a,s,o=e[0],c=e[1],f=e[2],l=0,d=[];l<o.length;l++)s=o[l],n[s]&&d.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,f||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},i=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var f=0;f<o.length;f++)e(o[f]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"458f":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);var a=r("e814"),n=r.n(a),i=(r("cadf"),r("551c"),r("f751"),r("097d"),r("2b0e")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{staticClass:"text-xs-left",attrs:{id:"app"}},[r("Header"),r("v-container",[r("router-view")],1),r("Footer")],1)},o=[],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"primary header"},[r("v-container",{staticClass:"py-2 d-fl justify-space-between"},[r("router-link",{staticClass:"white--text display-1 d-fl align-center logo",attrs:{to:{name:"home"}}},[t._v("Vue Shopping Cart")]),r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{to:{name:"favorites"},large:"",icon:""}},[r("v-badge",{attrs:{overlap:"",color:"red"},scopedSlots:t._u([t.$store.state.storage.favorites.length?{key:"badge",fn:function(){return[r("span",[t._v(t._s(t.$store.state.storage.favorites.length))])]},proxy:!0}:null],null,!0)},[r("v-icon",{attrs:{large:""}},[t._v("favorite")])],1)],1),r("v-btn",{staticClass:"white--text",attrs:{to:{name:"cart"},large:"",icon:""}},[r("v-badge",{attrs:{overlap:"",color:"red"},scopedSlots:t._u([t.$store.state.storage.cart.length?{key:"badge",fn:function(){return[r("span",[t._v(t._s(t.$store.state.storage.cart.length))])]},proxy:!0}:null],null,!0)},[r("v-icon",{attrs:{large:""}},[t._v("shopping_cart")])],1)],1)],1)],1)},f=[],u=r("2877"),l={},d=Object(u["a"])(l,c,f,!1,null,null,null),p=d.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-footer",{attrs:{dark:"",height:"auto"}},[r("v-card",{staticClass:"grey darken-3 white--text text-xs-center",attrs:{flat:"",tile:""}},[r("v-card-text",t._l(t.icons,function(e){return r("v-btn",{key:e,staticClass:"mx-3 white--text",attrs:{icon:""}},[r("v-icon",{attrs:{size:"24px"}},[t._v(t._s(e))])],1)}),1),r("v-card-text",{staticClass:"white--text pt-0"},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{sm4:"",xs12:""}},[t._v("Lorem ipsum — классическая панграмма, условный, зачастую бессмысленный текст-заполнитель, вставляемый в макет страницы.")]),r("v-flex",{attrs:{sm4:"",xs12:""}},[t._v("Является искажённым отрывком из философского трактата Марка Туллия Цицерона «О пределах добра и зла», написанного в 45 году до н. э. на латинском языке, обнаружение сходства атрибутируется Ричарду МакКлинтоку[1].")]),r("v-flex",{attrs:{sm4:"",xs12:""}},[t._v("Распространился в 1970-х годах из-за трафаретов компании Letraset, a затем — из-за того, что служил семплом в программе PageMaker.")])],1)],1),r("v-divider"),r("v-card-text",{staticClass:"white--text"},[t._v("\n\t\t\t© 2018 —\n\t\t\t"),r("strong",[t._v("SergMuhin")])])],1)],1)},m=[],y={data:function(){return{icons:["fab fa-facebook","fab fa-twitter","fab fa-google-plus","fab fa-linkedin","fab fa-instagram"]}}},g=y,_=Object(u["a"])(g,v,m,!1,null,null,null),h=_.exports,b={components:{Header:p,Footer:h}},x=b,I=(r("5c0b"),Object(u["a"])(x,s,o,!1,null,null,null)),C=I.exports,E=r("8c4f"),k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"home"},[r("h1",{staticClass:"mb-4"},[t._v("Товары")]),r("offers-list",{attrs:{offers:t.offers}})],1)},T=[],$=(r("7f7f"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"offers-list"},[r("v-container",{staticClass:"px-0 pt-0",attrs:{"grid-list-md":""}},[r("div",{staticClass:"mb-3 text-xs-left"},[r("v-chip",{attrs:{selected:0===t.activeTypeId,outline:"",color:"primary"},on:{click:function(e){return t.filterClickHandler(0)}}},[t._v("Все")]),t._l(t.types,function(e){return r("v-chip",{key:e.id,attrs:{outline:"",color:"primary",selected:e.id===t.activeTypeId},on:{click:function(r){return t.filterClickHandler(e.id)}}},[t._v(t._s(e.name))])})],2),t.activeOffers.length?r("v-layout",{attrs:{wrap:""}},t._l(t.activeOffers,function(t){return r("v-flex",{key:t.id,attrs:{lg3:"",md4:"",sm6:"",xs12:""}},[r("router-link",{attrs:{to:{name:"offer",params:{offerId:t.id}}}},[r("offers-list-item",{attrs:{offer:t}})],1)],1)}),1):r("v-layout",{attrs:{"mt-5":""}},[r("v-flex",{staticClass:"text-xs-center"},[t._v("К сожалению ничего не нашлось")])],1),t.count>t.limit?r("div",{staticClass:"mt-5 text-xs-center"},[r("v-pagination",{attrs:{length:Math.ceil(t.count/t.limit),"total-visible":7},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()],1)],1)}),O=[],q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"offer",attrs:{hover:""}},[r("v-img",{staticClass:"offer-image",attrs:{"lazy-src":"https://picsum.photos/20/20/?image="+t.offer.id,src:"https://picsum.photos/700/700/?image="+t.offer.id}}),r("div",{on:{click:function(e){return e.preventDefault(),t.$store.commit("storage/CHANGE",{storage:"favorites",offer:t.offer})}}},[r("favorites-button",{attrs:{isFavorites:t.$store.state.storage.favorites.map(function(t){return t.id}).includes(t.offer.id)}})],1),r("v-card-title",{attrs:{"primary-title":""}},[r("div",{staticClass:"mx-auto text-xs-center text-truncate"},[r("h3",{staticClass:"display-1 mb-0"},[t._v(t._s(t.offer.name))])])]),r("v-card-actions",{staticClass:"justify-space-between"},[r("div",{staticClass:"offer-discount title pa-1 pink lighten-1 white--text"},[t._v("-"+t._s(t.offer.discount)+" %")]),r("div",{staticClass:"offer-price text-xs-center"},[r("div",{staticClass:"offer-price-prev title grey--text"},[t._v(t._s(t._f("priceFormat")(t.offer.price))+" ₽")]),r("div",{staticClass:"offer-price-current headline"},[t._v(t._s(t._f("priceFormat")(t.offer.price))+" ₽")])]),r("div",{on:{click:function(e){return e.preventDefault(),t.$store.commit("storage/CHANGE",{storage:"cart",offer:t.offer})}}},[r("add-to-cart-button",{attrs:{inCart:t.$store.state.storage.cart.map(function(t){return t.id}).includes(t.offer.id)}})],1)])],1)},w=[],S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"favorites-button d-flex justify-end pa-0"},[r("v-btn",{staticClass:"favorites-button white--text",staticStyle:{"max-width":"40px"},attrs:{fab:"",small:"",color:t.isFavorites?"red":"blue"}},[r("v-icon",{attrs:{dark:""}},[t._v(t._s(t.isFavorites?"favorite":"favorite_border"))])],1)],1)},F=[],j={props:{isFavorites:{type:Boolean,default:!1}}},A=j,R=(r("8d7b"),Object(u["a"])(A,S,F,!1,null,"bbf6d9a0",null)),P=R.exports,H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",{staticClass:"white--text",attrs:{fab:"",color:t.inCart?"green":"info"}},[r("v-icon",{attrs:{dark:""}},[t._v(t._s(t.inCart?"check":"add_shopping_cart"))])],1)},M=[],N={props:{inCart:{type:Boolean,default:!1}}},D=N,V=Object(u["a"])(D,H,M,!1,null,null,null),Y=V.exports,B={components:{"favorites-button":P,"add-to-cart-button":Y},props:{offer:{required:!0,type:Object}},computed:{offerImgSrc:function(){return"./../assets/logo.jpg"}}},G=B,L=(r("f766"),Object(u["a"])(G,q,w,!1,null,"0c6b5c7a",null)),U=L.exports,J={props:{offers:{type:Array,required:!0}},components:{"offers-list-item":U},data:function(){return{page:this.$store.getters["storage/page"],limit:12,types:[{id:1,name:"type1 name"},{id:2,name:"type2 name"},{id:3,name:"type3 name"}]}},computed:{activeOffers:function(){return this.filteredOffers.slice((this.page-1)*this.limit,this.page*this.limit)},filteredOffers:function(){var t=this;return this.activeTypeId?this.offers.filter(function(e){return e.typeId===t.activeTypeId}):this.offers},count:function(){return this.filteredOffers.length},activeTypeId:function(){return this.$store.state.storage.activeTypeId}},methods:{filterClickHandler:function(t){this.page=1,this.$store.commit("storage/SET_ACTIVE_TYPE_ID",t)}}},Q=J,z=Object(u["a"])(Q,$,O,!1,null,null,null),X=z.exports,K={components:{"offers-list":X},beforeRouteLeave:function(t,e,r){"favorites"===t.name&&this.$store.commit("storage/SET_ACTIVE_TYPE_ID",0),r()},computed:{offers:function(){return this.$store.state.offers.active}}},W=K,Z=Object(u["a"])(W,k,T,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("div",{staticClass:"d-fl justify-space-between mb-4"},[r("h1",[t._v("Корзина")]),r("v-btn",{attrs:{color:"blue lighten-2",flat:""},on:{click:function(e){return t.$router.go(-1)}}},[r("v-icon",{attrs:{dark:"",left:""}},[t._v("arrow_back")]),t._v("Back\n\t\t")],1)],1),t.offers.length?r("div",{staticClass:"cart"},[t._l(t.offers,function(e){return r("p",{key:e.id},[r("span",{on:{click:function(r){return t.$store.commit("storage/CHANGE_QUANTITY",{add:!1,id:e.id})}}},[t._v("-")]),t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t\t"),r("span",{on:{click:function(r){return t.$store.commit("storage/CHANGE_QUANTITY",{add:!0,id:e.id})}}},[t._v("+")]),t._v("\n\t\t\t-- "+t._s(e.quantity)+" ------\n\t\t\t"),r("span",{on:{click:function(r){return t.$store.commit("storage/REMOVE_FROM_CART",e.id)}}},[t._v("X")])])}),r("p",{on:{click:function(e){return t.$store.commit("storage/CLEAR",{storage:"cart"})}}},[t._v("Удалить всё")])],2):r("v-layout",{attrs:{"mt-5":""}},[r("v-flex",{staticClass:"text-xs-center"},[t._v("К сожалению ничего не нашлось")])],1)],1)},rt=[],at={computed:{offers:function(){return this.$store.state.storage.cart}}},nt=at,it=Object(u["a"])(nt,et,rt,!1,null,null,null),st=it.exports,ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"favorites"},[r("div",{staticClass:"d-fl justify-space-between mb-4"},[r("h1",[t._v("Избранное")]),r("v-btn",{attrs:{color:"blue lighten-2",flat:""},on:{click:function(e){return t.$router.go(-1)}}},[r("v-icon",{attrs:{dark:"",left:""}},[t._v("arrow_back")]),t._v("Back\n\t\t")],1)],1),r("offers-list",{attrs:{offers:t.offers}})],1)},ct=[],ft={components:{"offers-list":X},beforeRouteEnter:function(t,e,r){r(function(t){"offer"!==e.name&&t.$store.commit("storage/SET_ACTIVE_TYPE_ID",0)})},computed:{offers:function(){return this.$store.state.storage.favorites}}},ut=ft,lt=Object(u["a"])(ut,ot,ct,!1,null,null,null),dt=lt.exports,pt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},vt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",[t._v("404")])])}],mt={},yt=Object(u["a"])(mt,pt,vt,!1,null,null,null),gt=yt.exports,_t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"offer"},[r("div",{staticClass:"d-fl justify-space-between mb-4"},[r("h1",[t._v(t._s(t.offer.name))]),r("v-btn",{attrs:{color:"blue lighten-2",flat:""},on:{click:function(e){return t.$router.go(-1)}}},[r("v-icon",{attrs:{dark:"",left:""}},[t._v("arrow_back")]),t._v("Back\n\t\t")],1)],1),r("offers-list-item",{attrs:{offer:t.offer}})],1)},ht=[],bt=(r("7514"),{components:{"offers-list-item":U},computed:{offer:function(){var t=this;return this.$store.state.offers.active.find(function(e){return+e.id===+t.$route.params.offerId})}}}),xt=bt,It=Object(u["a"])(xt,_t,ht,!1,null,null,null),Ct=It.exports;i["default"].use(E["a"]);var Et=new E["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:tt},{path:"/cart",name:"cart",component:st},{path:"/favorites",name:"favorites",component:dt},{path:"/offer/:offerId",name:"offer",component:Ct},{path:"/catalog/:seoname",name:"home",component:gt},{path:"*",name:"not-found",component:gt}]}),kt=r("2f62"),Tt=r("f499"),$t=r.n(Tt),Ot=(r("6762"),r("2fdb"),r("20d6"),{cart:[],favorites:[],activeTypeId:0,page:1}),qt={page:function(){return Ot.page}},wt={getOffers:function(t,e){var r=localStorage.getItem(e.storage);r&&(r=JSON.parse(r),t.commit("SET_OFFERS",{storage:e.storage,offers:r}))},getActiveTypeId:function(t){var e=localStorage.getItem("activeTypeId");e&&t.commit("SET_ACTIVE_TYPE_ID",+e)}},St={CHANGE_QUANTITY:function(t,e){var r=t.cart.findIndex(function(t){return t.id===e.id});(e.add||1!==t.cart[r].quantity)&&(e.add?t.cart[r].quantity++:t.cart[r].quantity--,this.commit("storage/SET_OFFERS",{storage:"cart",offers:t.cart}))},REMOVE_FROM_CART:function(t,e){var r=t.cart.findIndex(function(t){return t.id===e});t.cart.splice(r,1),this.commit("storage/SET_OFFERS",{storage:"cart",offers:t.cart})},CLEAR:function(t,e){t[e.storage]=[],this.commit("storage/SET_OFFERS",{storage:[e.storage],offers:t[e.storage]})},CHANGE:function(t,e){var r=t[e.storage],a=r.map(function(t){return t.id});if(a.includes(e.offer.id)){var n=r.findIndex(function(t){return t.id===e.offer.id});"cart"===e.storage?r[n].quantity++:r.splice(n,1)}else{r.push(e.offer);var i="cart"===e.storage?"Корзину":"Избранное";this._vm.$toastr.success("Добавлен в ".concat(i),e.offer.name,{positionClass:"toast-bottom-right"})}this.commit("storage/SET_OFFERS",{storage:e.storage,offers:r})},SET_OFFERS:function(t,e){t[e.storage]=e.offers,localStorage.setItem(e.storage,$t()(t[e.storage]))},SET_ACTIVE_TYPE_ID:function(t,e){t.page=1,t.activeTypeId=e,localStorage.setItem("activeTypeId",e)}},Ft={namespaced:!0,state:Ot,getters:qt,actions:wt,mutations:St},jt=[{id:1,name:"Товар 1",price:38470,discount:18,typeIdId:3,quantity:1},{id:2,name:"Товар 2",price:91290,discount:22,typeId:1,quantity:1},{id:3,name:"Товар 3",price:48652,discount:20,typeId:2,quantity:1},{id:4,name:"Товар 4",price:78583,discount:20,typeId:2,quantity:1},{id:5,name:"Товар 5",price:14537,discount:20,typeId:1,quantity:1},{id:6,name:"Товар 6",price:57843,discount:20,typeId:3,quantity:1},{id:7,name:"Товар 7",price:45358,discount:20,typeId:3,quantity:1},{id:8,name:"Товар 8",price:45217,discount:20,typeId:1,quantity:1},{id:9,name:"Товар 9",price:75819,discount:20,typeId:2,quantity:1},{id:10,name:"Товар 10",price:57485,discount:20,typeId:1,quantity:1},{id:11,name:"Товар 11",price:11247,discount:20,typeId:3,quantity:1},{id:12,name:"Товар 12",price:86975,discount:20,typeId:1,quantity:1},{id:13,name:"Товар 13",price:85637,discount:20,typeId:2,quantity:1},{id:14,name:"Товар 14",price:45785,discount:20,typeId:1,quantity:1},{id:15,name:"Товар 15",price:35678,discount:20,typeId:2,quantity:1},{id:16,name:"Товар 16",price:67587,discount:20,typeId:1,quantity:1},{id:17,name:"Товар 17",price:63571,discount:20,typeId:3,quantity:1},{id:18,name:"Товар 18",price:57867,discount:20,typeId:1,quantity:1},{id:19,name:"Товар 19",price:75345,discount:20,typeId:2,quantity:1},{id:20,name:"Товар 20",price:42357,discount:20,typeId:1,quantity:1},{id:21,name:"Товар 21",price:75378,discount:20,typeId:1,quantity:1},{id:22,name:"Товар 22",price:35478,discount:20,typeId:3,quantity:1},{id:23,name:"Товар 23",price:47531,discount:20,typeId:2,quantity:1},{id:24,name:"Товар 24",price:85315,discount:20,typeId:1,quantity:1},{id:25,name:"Товар 25",price:42357,discount:20,typeId:3,quantity:1},{id:26,name:"Товар 26",price:23564,discount:20,typeId:2,quantity:1},{id:27,name:"Товар 27",price:35457,discount:20,typeId:1,quantity:1},{id:28,name:"Товар 28",price:47125,discount:20,typeId:1,quantity:1},{id:29,name:"Товар 29",price:57963,discount:20,typeId:1,quantity:1},{id:30,name:"Товар 30",price:35487,discount:20,typeId:3,quantity:1},{id:31,name:"Товар 31",price:97864,discount:20,typeId:1,quantity:1},{id:32,name:"Товар 32",price:67318,discount:20,typeId:2,quantity:1},{id:33,name:"Товар 33",price:47583,discount:20,typeId:2,quantity:1}],At={count:0,active:jt},Rt={count:function(){return At.count},active:function(){return At.active}},Pt={namespaced:!0,state:At,getters:Rt};i["default"].use(kt["a"]);var Ht=new kt["a"].Store({modules:{storage:Ft,offers:Pt}}),Mt=r("ddf5"),Nt=r.n(Mt),Dt=(r("e1db"),r("ce5b")),Vt=r.n(Dt);window.toastr=r("854a"),i["default"].use(Nt.a),i["default"].use(Vt.a,{theme:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}),i["default"].filter("priceFormat",function(t){return t?n()(t).toLocaleString("ru-RU"):""}),i["default"].config.productionTip=!1,new i["default"]({beforeCreate:function(){this.$store.dispatch("storage/getOffers",{storage:"cart"}),this.$store.dispatch("storage/getOffers",{storage:"favorites"}),this.$store.dispatch("storage/getActiveTypeId")},router:Et,store:Ht,render:function(t){return t(C)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var a=r("458f"),n=r.n(a);n.a},8815:function(t,e,r){},"8d7b":function(t,e,r){"use strict";var a=r("8815"),n=r.n(a);n.a},af1b:function(t,e,r){},f766:function(t,e,r){"use strict";var a=r("af1b"),n=r.n(a);n.a}});
//# sourceMappingURL=app.e8c2a5f9.js.map